<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Feedback History - FitTrack</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" />
  <link rel="stylesheet" href="css/style.css" />
  <link rel="stylesheet" href="css/coachhistory.css" />
  <link href="https://fonts.googleapis.com/css2?family=Rubik:wght@400;600;800&display=swap" rel="stylesheet" />
</head>
<body>
  <header>
    <nav class="navbar navbar-expand-lg custom-navbar">
      <section class="container d-flex justify-content-between align-items-center">
        <a href="index.html" class="navbar-brand d-flex align-items-center">
          <img src="images/fittrack_logo_darkgreen.png" alt="FitTrack Logo" width="64" height="64" class="me-2">
          <strong class="fs-4 text-dark">FitTrack</strong>
        </a>
        <nav class="d-flex align-items-center gap-3">
          <ul class="nav mb-0">
            <li class="nav-item"><a href="index.html" class="nav-link">Home</a></li>
            <li class="nav-item dropdown">
              <a class="nav-link dropdown-toggle active-link" href="#" id="dashboardDropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
                Feedback History
              </a>
              <ul class="dropdown-menu" aria-labelledby="dashboardDropdown">
                <li><a class="dropdown-item" href="coachdashboard.html">Dashboard</a></li>
                <li><a class="dropdown-item" href="coachfeedback.html">Send Feedback</a></li>
              </ul>
            </li>
            <li class="nav-item"><a href="index.html" class="btn btn-success px-4 ms-2">Logout</a></li>
          </ul>
        </nav>
      </section>
    </nav>
  </header>

  <main class="container my-5">
    <div class="text-center d-flex justify-content-center align-items-center mb-4">
      <img src="images/notepad_icon_optimized.png" alt="Notepad Icon" width="56" height="56" class="me-2" />
      <h2 class="form-title fw-bold mb-0">Feedback History</h2>
    </div>

    <!-- 🟢 סינון לפי מתאמן -->
    <div class="row mb-4 justify-content-center">
      <div class="col-md-6">
        <label for="traineeFilter" class="form-label fw-bold text-success">Filter by Trainee</label>
        <select id="traineeFilter" class="form-select border-success">
          <option value="">-- Show All Trainees --</option>
          <!-- ייטען דינאמית -->
        </select>
      </div>
    </div>

    <section class="history-section">
      <table class="history-table table table-bordered table-hover">
        <thead class="table-light">
          <tr>
            <th>Trainee name</th>
            <th>Date</th>
            <th>Time</th>
            <th>Feedback</th>
            <th>Status</th> <!-- ✅ עמודת סטטוס שנוספה -->
            <th>Actions</th>
          </tr>
        </thead>
        <tbody id="feedbackTableBody">
          <tr><td colspan="6" class="text-center">Loading feedback history...</td></tr>
        </tbody>
      </table>
    </section>
  </main>

  <!-- 🔧 Edit Modal -->
  <dialog id="editModal">
    <form method="dialog" id="editFeedbackForm">
      <div class="d-flex justify-content-between align-items-center mb-2">
        <h3 class="mb-0">Edit Feedback</h3>
        <button type="button" id="closeEditModal" class="btn-close" aria-label="Close"></button>
      </div>
      <label for="editDate">Date:
        <input type="date" id="editDate" class="form-control" />
      </label>
      <label for="editTime">Time:
        <input type="time" id="editTime" class="form-control" />
      </label>
      <label for="editNutrition">Nutrition Feedback:
        <textarea id="editNutrition" rows="2" class="form-control"></textarea>
        <div class="invalid-feedback">This field is required.</div>
      </label>
      <label for="editExercise">Exercise Feedback:
        <textarea id="editExercise" rows="2" class="form-control"></textarea>
        <div class="invalid-feedback">This field is required.</div>
      </label>
      <label for="editGeneral">General Feedback:
        <textarea id="editGeneral" rows="2" class="form-control"></textarea>
        <div class="invalid-feedback">This field is required.</div>
      </label>
      <div id="form-message" class="form-feedback text-center mt-2"></div>
      <section class="mt-3 d-flex justify-content-between">
        <button type="submit" class="btn btn-primary">Update</button>
        <button type="button" class="btn btn-secondary" onclick="document.getElementById('editModal').close()">Cancel</button>
      </section>
    </form>
  </dialog>

  <!-- 🗑️ Delete Modal -->
  <dialog id="deleteConfirmModal">
    <h4 style="color: #14532D;">Are you sure you want to delete this feedback?</h4>
    <div id="deleteMessageBox" class="form-feedback mb-2"></div>
    <section class="mt-4 d-flex justify-content-end gap-2">
      <button type="button" id="confirmDeleteBtn" class="btn btn-danger">Yes, Delete</button>
      <button type="button" class="btn btn-secondary" onclick="document.getElementById('deleteConfirmModal').close()">Cancel</button>
    </section>
  </dialog>

  <footer class="footer-section text-center text-white mt-5 py-4">
    <section class="mb-3">
      <a href="https://facebook.com" target="_blank"><img src="images/facebook.svg" alt="Facebook" width="24" class="mx-2 social-icon" /></a>
      <a href="https://instagram.com" target="_blank"><img src="images/instagram.svg" alt="Instagram" width="24" class="mx-2 social-icon" /></a>
      <a href="https://twitter.com" target="_blank"><img src="images/twitter.svg" alt="Twitter" width="24" class="mx-2 social-icon" /></a>
    </section>
    <small>© 2025 FitTrack, All rights reserved.</small>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
  <script src="js/config.js" type="module"></script>
  <script src="js/coachhistory.js" type="module"></script>
</body>
</html>
